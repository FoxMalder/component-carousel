{"version":3,"file":null,"sources":["../src/flexicarousel.js"],"sourcesContent":["/*\n * carousel ten billion\n * https://github.com/apathetic/flexicarousel\n *\n * Copyright (c) 2013, 2016 Wes Hatch\n * Licensed under the MIT license.\n *\n */\n\n// var default = class Carousel {\n// ...\n// module.exports = default;\n\n\nexport default class Carousel {\n\n\tconstructor(container, options={}) {\n\n\t\tthis.handle = container;\n\n\t\t// default options\n\t\t// --------------------\n\t\tthis.options = {\n\t\t\tactiveClass: 'active',\n\t\t\tslideWrap: 'ul',\t\t\t\t// for binding touch events\n\t\t\tslides: 'li',\t\t\t\t\t\t// the slides\n\t\t\tinfinite: true,\t\t\t\t\t// infinite scrolling or not\n\t\t\tdisplay: 1,\t\t\t\t\t\t\t// the minimum # of slides to display at a time. If you want to have slides...\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// \"hanging\" off outside the currently viewable ones, they'd be included here.\n\t\t\tdisableDragging: false\t// only use API to navigate\n\t\t};\n\n\t\t// state vars\n\t\t// --------------------\n\t\tthis.current = 0;\n\t\tthis.slides = [];\n\t\tthis.sliding = false;\n\t\tthis.cloned = 0;\n\t\tthis.active = true;\n\n\t\t// touch vars\n\t\t// --------------------\n\t\tthis.dragging = false;\n\t\tthis.dragThreshold = 10;\n\t\tthis.deltaX = 0;\n\n\t\t// feature detection\n\t\t// --------------------\n\t\tthis.isTouch = 'ontouchend' in document;\n\t\tvar style = document.body.style;\n\t\tvar tests = {\n\t\t\t 'transform':'transitionend',\n\t\t\t 'OTransform': 'oTransitionEnd',\n\t\t\t 'MozTransform': 'transitionend',\n\t\t\t 'webkitTransform': 'webkitTransitionEnd'\n\t\t};\n\t\t// note: we don't test \"ms\" prefix, (as that gives us IE9 which doesn't support transforms3d anyway. IE10 will work with \"transform\")\n\t\tfor (var x in tests) {\n\t\t\tif ( style[x] !== undefined) {\n\t\t\t\tthis.transform = x;\n\t\t\t\tthis.transitionEnd = tests[x];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\t// set up options\n\t\t// --------------------\n\t\tthis.options = Object.assign(this.options, options);\n\n\t\t// engage engines\n\t\t// --------------------\n\t\tthis.init();\n\t}\n\n\t/**\n\t * Initialize the carousel and set some defaults\n\t * @param  {object} options List of key: value options\n\t * @return {void}\n\t */\n\tinit() {\n\t\t// find carousel elements\n\t\tthis.slideWrap = this.handle.querySelector(this.options.slideWrap);\n\t\tthis.slides = this.slideWrap.querySelectorAll(this.options.slides);\n\t\tthis.numSlides = this.slides.length;\n\n\t\tif (!this.slideWrap || !this.slides || this.numSlides < this.options.display) { return this.active = false; }\n\t\tif (this.options.infinite) { this._cloneSlides(); }\n\n\t\tthis.go(0);\t\t\t// this adds our slide classes\n\n\t\t// set up Events\n\t\tthis._bindings = this._createBindings();\n\n\t\tif (!this.options.disableDragging) {\n\t\t\tif (this.isTouch) {\n\t\t\t\t['touchstart', 'touchmove', 'touchend', 'touchcancel'].map((event) => {\n\t\t\t\t\tthis.handle.addEventListener(event, this._bindings[event]);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t['mousedown', 'mousemove', 'mouseup', 'mouseleave', 'click'].map((event) => {\n\t\t\t\t\tthis.handle.addEventListener(event, this._bindings[event]);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\twindow.addEventListener('resize', this._bindings['resize']);\n\t\twindow.addEventListener('orientationchange', this._bindings['orientationchange']);\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Removes all event bindings.\n\t * @returns {Carousel}\n\t * */\n\tdestroy() {\n\t\tfor (let event in this._bindings) {\n\t\t\tthis.handle.removeEventListener(event, this._bindings[event]);\n\t\t}\n\n\t\tthis._bindings = null;\n\t\tthis.options = this.slides = this.slideWrap = this.handle = null;\n\t\tthis.active = false;\n\n\t\t// remove classes ...\n\t\t// remove clones ...\n\t}\n\n\t/**\n\t * Go to the next slide\n\t * @return {void}\n\t */\n\tnext() {\n\t\tif (this.options.infinite || this.current !== this.numSlides-1) {\n\t\t\tthis.go(this.current + 1);\n\t\t} else {\n\t\t\tthis.go(this.numSlides-1);\n\t\t}\n\t}\n\n\t/**\n\t * Go to the previous slide\n\t * @return {void}\n\t */\n\tprev() {\n\t\tif (this.options.infinite || this.current !== 0) {\n\t\t\tthis.go(this.current - 1);\n\t\t} else {\n\t\t\tthis.go(0);\t\t// allow the slide to \"snap\" back if dragging and not infinite\n\t\t}\n\t}\n\n\t/**\n\t * Go to a particular slide. Prime the \"to\" slide by positioning it, and then calling _slide() if needed\n\t * @param  {int} to\t\tthe slide to go to\n\t * @return {void}\n\t */\n\tgo(to) {\n\t\t// let opts = this.options;\n\t\t// let slides = this.slides;\n\n\t\tif (this.sliding || !this.active) { return; }\n\n\t\tthis.width = this.slides[0].getBoundingClientRect().width;\t\t\t\t// check every time. This is preferrable to .offsetWidth as we get a fractional width\n\t\tthis.offset = this.cloned * this.width;\n\t\t// this.offset = this.options.display * this.width;\n\n\t\tif (to < 0 || to >= this.numSlides) {\t\t\t\t\t\t\t\t\t// position the carousel if infinite and at end of bounds\n\t\t\tlet temp = (to < 0) ? this.current+this.numSlides : this.current-this.numSlides;\n\t\t\tthis._slide( -(temp * this.width - this.deltaX) );\n\n\t\t\t/* jshint ignore:start */\n\t\t\tthis.slideWrap.offsetHeight;\t\t\t\t\t\t\t\t\t\t// force a repaint to actually position \"to\" slide. *Important*\n\t\t\t/* jshint ignore:end */\n\t\t}\n\n\t\tto = this._loop(to);\n\t\tthis._slide( -(to * this.width), true );\n\n\t\tif (this.options.onSlide) { this.options.onSlide.call(this, to, this.current); }\t// note: doesn't check if it's a function\n\n\t\tthis._removeClass(this.slides[this.current], this.options.activeClass);\n\t\tthis._addClass(this.slides[to], this.options.activeClass);\n\t\tthis.current = to;\n\t}\n\n\t// ------------------------------------- Event Listeners ------------------------------------- //\n\n\t/**\n\t * Create references to all bound Events so that they may be removed upon destroy()\n\t * @return {Object} containing references to each event and its bound function\n\t */\n\t_createBindings() {\n\t\treturn {\n\t\t\t// handle\n\t\t\t'touchstart': this._dragStart.bind(this),\n\t\t\t'touchmove': this._drag.bind(this),\n\t\t\t'touchend': this._dragEnd.bind(this),\n\t\t\t'touchcancel': this._dragEnd.bind(this),\n\t\t\t'mousedown': this._dragStart.bind(this),\n\t\t\t'mousemove': this._drag.bind(this),\n\t\t\t'mouseup': this._dragEnd.bind(this),\n\t\t\t'mouseleave': this._dragEnd.bind(this),\n\t\t\t'click': this._checkDragThreshold.bind(this),\n\n\t\t\t// window\n\t\t\t'resize': this._updateView.bind(this),\n\t\t\t'orientationchange': this._updateView.bind(this)\n\t\t};\n\t}\n\n\t// ------------------------------------- Drag Events ------------------------------------- //\n\n\t_checkDragThreshold(e) {\n\t\tif (this.dragThresholdMet) {\n\t\t\te.preventDefault();\n\t\t}\n\t}\n\n\t/**\n\t * Start dragging (via touch)\n\t * @param  {event} e Touch event\n\t * @return {void}\n\t */\n\t_dragStart(e) {\n\t\tvar touches;\n\n\t\tif (this.sliding) {\n\t\t\treturn false;\n\t\t}\n\n\t\te = e.originalEvent || e;\n\t\ttouches = e.touches !== undefined ? e.touches : false;\n\n\t\tthis.dragThresholdMet = false;\n\t\tthis.dragging = true;\n\t\tthis.startClientX = touches ? touches[0].pageX : e.clientX;\n\t\tthis.startClientY = touches ? touches[0].pageY : e.clientY;\n\t\tthis.deltaX = 0;\t// reset for the case when user does 0,0 touch\n\t\tthis.deltaY = 0;\t// reset for the case when user does 0,0 touch\n\n\t\tif (e.target.tagName === 'IMG' || e.target.tagName === 'A') { e.target.draggable = false; }\n\t}\n\n\t/**\n\t * Update slides positions according to user's touch\n\t * @param  {event} e Touch event\n\t * @return {void}\n\t */\n\t_drag(e) {\n\t\tvar touches;\n\n\t\tif (!this.dragging) {\n\t\t\treturn;\n\t\t}\n\n\t\te = e.originalEvent || e;\n\t\ttouches = e.touches !== undefined ? e.touches : false;\n\t\tthis.deltaX = (touches ? touches[0].pageX : e.clientX) - this.startClientX;\n\t\tthis.deltaY = (touches ? touches[0].pageY : e.clientY) - this.startClientY;\n\n    // drag slide along with cursor\n\t\tthis._slide( -(this.current * this.width - this.deltaX ) );\n\n\t\t// determine if we should do slide, or cancel and let the event pass through to the page\n\t\tthis.dragThresholdMet = this.dragThresholdMet || Math.abs(this.deltaX) > this.dragThreshold;\n\t}\n\n\t/**\n\t * Drag end, calculate slides' new positions\n\t * @param  {event} e Touch event\n\t * @return {void}\n\t */\n\t_dragEnd(e) {\n\t\tif (!this.dragging) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.dragThresholdMet) {\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\t\t\te.stopImmediatePropagation();\n\t\t}\n\n\t\tthis.dragging = false;\n\n\t\tif ( this.deltaX !== 0 && Math.abs(this.deltaX) < this.dragThreshold ) {\n\t\t\tthis.go(this.current);\n\t\t}\n\t\telse if ( this.deltaX > 0 ) {\n\t\t\t// var jump = Math.round(this.deltaX / this.width);\t// distance-based check to swipe multiple slides\n\t\t\t// this.go(this.current - jump);\n\t\t\tthis.prev();\n\t\t}\n\t\telse if ( this.deltaX < 0 ) {\n\t\t\tthis.next();\n\t\t}\n\n\t\tthis.deltaX = 0;\n\t}\n\n\n\t// ------------------------------------- carousel engine ------------------------------------- //\n\n\n\t/**\n\t * Helper function to translate slide in browser\n\t * @param  {[type]} el     [description]\n\t * @param  {[type]} offset [description]\n\t * @return {[type]}        [description]\n\t */\n\t_slide(offset, animate) {\n\t\tvar delay = 400;\n\t\t// var self = this;\n\n\t\toffset -= this.offset;\n\n\t\tif (animate) {\n\t\t\tthis.sliding = true;\n\t\t\tthis._addClass(this.slideWrap, 'animate');\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.sliding = false;\n\t\t\t\tthis._removeClass(this.slideWrap, 'animate');\n\t\t\t}, delay);\n\t\t}\n\n\t\tif (this.transform) {\n\t\t\tthis.slideWrap.style[this.transform] = 'translate3d(' + offset + 'px, 0, 0)';\n\t\t}\n\t\telse {\n\t\t\tthis.slideWrap.style.left = offset+'px';\n\t\t}\n\t}\n\n\n\t// ------------------------------------- \"helper\" functions ------------------------------------- //\n\n\n\t/**\n\t * Helper function. Calculate modulo of a slides position\n\t * @param  {int} val Slide's position\n\t * @return {int} the index modulo the # of slides\n\t */\n\t_loop(val) {\n\t\treturn (this.numSlides + (val % this.numSlides)) % this.numSlides;\n\t}\n\n\t/**\n\t * Update the slides' position on a resize. This is throttled at 300ms\n\t * @return {void}\n\t */\n\t_updateView() {\n\t\tclearTimeout(this.timer);\n\t\tthis.timer = setTimeout(() => { this.go(this.current); }, 300);\n\t}\n\n\t/**\n\t * Duplicate the first and last N slides so that infinite scrolling can work.\n\t * Depends on how many slides are visible at a time, and any outlying slides as well\n\t * @return {void}\n\t */\n\t_cloneSlides() {\n\t\tvar duplicate;\n\t\tvar display = this.options.display;\n\t\tvar fromEnd = Math.max(this.numSlides - display, 0);\n\t\tvar fromBeg = Math.min(display, this.numSlides);\n\n\t\t// take \"display\" slides from the end and add to the beginning\n\t\tfor (let i = this.numSlides; i > fromEnd; i--) {\n\t\t\tduplicate = this.slides[i-1].cloneNode(true);\t\t\t\t\t\t// cloneNode --> true is deep cloning\n\t\t\tduplicate.removeAttribute('id');\n\t\t\tduplicate.setAttribute('aria-hidden', 'true');\n\t\t\tthis._addClass(duplicate, 'clone');\n\t\t\tthis.slideWrap.insertBefore(duplicate, this.slideWrap.firstChild);\t// \"prependChild\"\n\t\t\tthis.cloned++;\n\t\t}\n\n\t\t// take \"display\" slides from the beginning and add to the end\n\t\tfor (let i = 0; i < fromBeg; i++) {\n\t\t\tduplicate = this.slides[i].cloneNode(true);\n\t\t\tduplicate.removeAttribute('id');\n\t\t\tduplicate.setAttribute('aria-hidden', 'true');\n\t\t\tthis._addClass(duplicate, 'clone');\n\t\t\tthis.slideWrap.appendChild(duplicate);\n\t\t}\n\n\t\t// this.slideWrap.style.marginLeft = (-display)+'00%';\t\t\t\t\t// use marginLeft (not left) so IE8/9 etc can use left to slide\n\t}\n\n\t/**\n\t * Helper function to add a class to an element\n\t * @param  {int} i    Index of the slide to add a class to\n\t * @param  {string} name Class name\n\t * @return {void}\n\t */\n\t_addClass(el, name) {\n\t\tif (el.classList) { el.classList.add(name); }\n\t\telse {el.className += ' ' + name; }\n\t}\n\n\t/**\n\t * Helper function to remove a class from an element\n\t * @param  {int} i    Index of the slide to remove class from\n\t * @param  {string} name Class name\n\t * @return {void}\n\t */\n\t_removeClass(el, name) {\n\t\tif (el.classList) { el.classList.remove(name); }\n\t\telse { el.className = el.className.replace(new RegExp('(^|\\\\b)' + name.split(' ').join('|') + '(\\\\b|$)', 'gi'), ' '); }\n\t}\n\n};\n"],"names":[],"mappings":"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"}