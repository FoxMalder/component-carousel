var Carousel=function(){"use strict";var i=document.createElement("div"),t=["transform","webkitTransform","MozTransform","OTransform","msTransform"].find(function(t){return void 0!==i.style[t]}),s=function(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")},e=function(){function i(i,t){for(var s=0;s<t.length;s++){var e=t[s];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(i,e.key,e)}}return function(t,s,e){return s&&i(t.prototype,s),e&&i(t,e),t}}(),n=function(){function i(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];s(this,i),this.handle=t,this.options={activeClass:"active",slideWrap:"ul",slides:"li",infinite:!0,display:1,disableDragging:!1},this.current=0,this.slides=[],this.sliding=!1,this.cloned=0,this.active=!0,this.dragging=!1,this.dragThreshold=10,this.deltaX=0,this.isTouch="ontouchend"in document,this.options=Object.assign(this.options,e),this.init()}return e(i,[{key:"init",value:function(){var i=this;return this.slideWrap=this.handle.querySelector(this.options.slideWrap),this.slides=this.slideWrap.querySelectorAll(this.options.slides),this.numSlides=this.slides.length,!this.slideWrap||!this.slides||this.numSlides<this.options.display?(console.log("Carousel: insufficient # slides"),this.active=!1):(this.options.infinite&&this._cloneSlides(),this.go(0),this._bindings=this._createBindings(),this.options.disableDragging||(this.isTouch?["touchstart","touchmove","touchend","touchcancel"].map(function(t){i.handle.addEventListener(t,i._bindings[t])}):["mousedown","mousemove","mouseup","mouseleave","click"].map(function(t){i.handle.addEventListener(t,i._bindings[t])})),window.addEventListener("resize",this._bindings.resize),window.addEventListener("orientationchange",this._bindings.orientationchange),this)}},{key:"destroy",value:function(){for(var i in this._bindings)this.handle.removeEventListener(i,this._bindings[i]);this._bindings=null,this.options=this.slides=this.slideWrap=this.handle=null,this.active=!1}},{key:"next",value:function(){this.options.infinite||this.current!==this.numSlides-1?this.go(this.current+1):this.go(this.numSlides-1)}},{key:"prev",value:function(){this.options.infinite||0!==this.current?this.go(this.current-1):this.go(0)}},{key:"go",value:function(i){if(!this.sliding&&this.active){if(this.width=this.slides[0].getBoundingClientRect().width,this.offset=this.cloned*this.width,i<0||i>=this.numSlides){var t=i<0?this.current+this.numSlides:this.current-this.numSlides;this._slide(-(t*this.width-this.deltaX)),this.slideWrap.offsetHeight}i=this._loop(i),this._slide(-(i*this.width),!0),this.options.onSlide&&this.options.onSlide.call(this,i,this.current),this._removeClass(this.slides[this.current],this.options.activeClass),this._addClass(this.slides[i],this.options.activeClass),this.current=i}}},{key:"_createBindings",value:function(){return{touchstart:this._dragStart.bind(this),touchmove:this._drag.bind(this),touchend:this._dragEnd.bind(this),touchcancel:this._dragEnd.bind(this),mousedown:this._dragStart.bind(this),mousemove:this._drag.bind(this),mouseup:this._dragEnd.bind(this),mouseleave:this._dragEnd.bind(this),click:this._checkDragThreshold.bind(this),resize:this._updateView.bind(this),orientationchange:this._updateView.bind(this)}}},{key:"_checkDragThreshold",value:function(i){this.dragThresholdMet&&i.preventDefault()}},{key:"_dragStart",value:function(i){var t;return!this.sliding&&(i=i.originalEvent||i,t=void 0!==i.touches&&i.touches,this.dragThresholdMet=!1,this.dragging=!0,this.startClientX=t?t[0].pageX:i.clientX,this.startClientY=t?t[0].pageY:i.clientY,this.deltaX=0,this.deltaY=0,void("IMG"!==i.target.tagName&&"A"!==i.target.tagName||(i.target.draggable=!1)))}},{key:"_drag",value:function(i){var t;this.dragging&&(i=i.originalEvent||i,t=void 0!==i.touches&&i.touches,this.deltaX=(t?t[0].pageX:i.clientX)-this.startClientX,this.deltaY=(t?t[0].pageY:i.clientY)-this.startClientY,this._slide(-(this.current*this.width-this.deltaX)),this.dragThresholdMet=this.dragThresholdMet||Math.abs(this.deltaX)>this.dragThreshold)}},{key:"_dragEnd",value:function(i){this.dragging&&(this.dragThresholdMet&&(i.preventDefault(),i.stopPropagation(),i.stopImmediatePropagation()),this.dragging=!1,0!==this.deltaX&&Math.abs(this.deltaX)<this.dragThreshold?this.go(this.current):this.deltaX>0?this.prev():this.deltaX<0&&this.next(),this.deltaX=0)}},{key:"_slide",value:function(i,s){var e=this,n=400;i-=this.offset,s&&(this.sliding=!0,this._addClass(this.slideWrap,"animate"),setTimeout(function(){e.sliding=!1,e._removeClass(e.slideWrap,"animate")},n)),t?this.slideWrap.style[t]="translate3d("+i+"px, 0, 0)":this.slideWrap.style.left=i+"px"}},{key:"_loop",value:function(i){return(this.numSlides+i%this.numSlides)%this.numSlides}},{key:"_updateView",value:function(){var i=this;clearTimeout(this.timer),this.timer=setTimeout(function(){i.go(i.current)},300)}},{key:"_cloneSlides",value:function(){for(var i,t=this.options.display,s=Math.max(this.numSlides-t,0),e=Math.min(t,this.numSlides),n=this.numSlides;n>s;n--)i=this.slides[n-1].cloneNode(!0),i.removeAttribute("id"),i.setAttribute("aria-hidden","true"),this._addClass(i,"clone"),this.slideWrap.insertBefore(i,this.slideWrap.firstChild),this.cloned++;for(var h=0;h<e;h++)i=this.slides[h].cloneNode(!0),i.removeAttribute("id"),i.setAttribute("aria-hidden","true"),this._addClass(i,"clone"),this.slideWrap.appendChild(i)}},{key:"_addClass",value:function(i,t){i.classList?i.classList.add(t):i.className+=" "+t}},{key:"_removeClass",value:function(i,t){i.classList?i.classList.remove(t):i.className=i.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")}}]),i}();return n}();